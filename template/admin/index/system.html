{extend name="common:inner"}
{block name="body"}
        <div class="layui-tab page-content-wrap">
            <ul class="layui-tab-title">
                <li class="layui-this">站点配置</li>
                <!--<li>SEO配置</li>-->
                <!--<li>邮箱配置</li>-->
                <li>评论设置</li>
            </ul>
            <div class="layui-tab-content">
                <!--站点配置-->
                <div class="layui-tab-item layui-show">
                    <form class="layui-form" style="width: 90%;padding-top: 20px;">
                        <div class="layui-form-item">
                            <label class="layui-form-label">网站名称：</label>
                            <div class="layui-input-block">
                                <input type="text" name="webname" autocomplete="off" class="layui-input" value="{$data.webname}">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">网站域名：</label>
                            <div class="layui-input-block">
                                <input type="text" name="domain" autocomplete="off" class="layui-input" value="{$data.domain}">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">站长邮箱：</label>
                            <div class="layui-input-block">
                                <input type="text" name="email" required lay-verify="required" placeholder="请输入邮箱" autocomplete="off" class="layui-input" value="{$data.email}">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">是否缓存：</label>
                            <div class="layui-input-block">
                                {eq name="$data.cached" value="on"}
                                    <input type="checkbox" checked="" name="cached" lay-skin="switch"  lay-filter="switchTest" lay-text="ON|OFF">
                                {else/}
                                    <input type="checkbox"  name="cached" lay-skin="switch"  lay-filter="switchTest" lay-text="ON|OFF">
                                {/eq}
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">静态首页：</label>
                            {eq name="$data.urlrewrite" value="on"}
                                <input type="radio" name="urlrewrite"  value="on" title="生成" checked="">
                                <input type="radio" name="urlrewrite"  value="off" title="不生成">
                            {else/}
                                <input type="radio" name="urlrewrite"  value="on" title="生成" >
                                <input type="radio" name="urlrewrite"  value="off" title="不生成" checked="">
                            {/eq}
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">备案信息：</label>
                            <div class="layui-input-block">
                                <input type="text" name="ICP"  placeholder="请输入备案信息" autocomplete="off" class="layui-input" value="{$data.ICP}">
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">版权信息：</label>
                            <div class="layui-input-block">
                                <input type="text" name="copyright" required lay-verify="required" placeholder="请输入版权信息" autocomplete="off" class="layui-input" value="{$data.copyright}">
                            </div>
                        </div>
                        <div class="layui-form-item layui-form-text">
                            <label class="layui-form-label">统计代码：</label>
                            <div class="layui-input-block">
                                <textarea name="statistic" placeholder="请输入代码" class="layui-textarea">{$data.statistic}</textarea>
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn layui-btn-normal" lay-submit lay-filter="siteInfo">立即提交</button>
                            </div>
                        </div>
                    </form>
                </div>
                <!--SEO配置-->
                <!--<div class="layui-tab-item">-->
                    <!--<form class="layui-form" style="width: 90%;padding-top: 20px;">-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">SEO标题：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="title" placeholder="请输入seo标题" autocomplete="off" class="layui-input" value="">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">关键字：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="keyword" placeholder="请输入seo关键字" autocomplete="off" class="layui-input" value="">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item layui-form-text">-->
                            <!--<label class="layui-form-label">描述：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<textarea name="desc" placeholder="请输入seo描述" class="layui-textarea"></textarea>-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<div class="layui-input-block">-->
                                <!--<button class="layui-btn layui-btn-normal" lay-submit lay-filter="seoInfo">立即提交</button>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</form>-->
                <!--</div>-->
                <!--邮箱配置-->
                <!--<div class="layui-tab-item">-->
                    <!--<form class="layui-form"  style="width: 90%;padding-top: 20px;">-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">邮箱模式：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="radio" name="urlrewrite" value="1" title="SMTP函数发送" checked="">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">服务器：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="smtp" placeholder="请输入邮件服务器" autocomplete="off" class="layui-input" value="smtp.163.com">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">端口：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="port" placeholder="请输入邮件发送端口" autocomplete="off" class="layui-input" value="25">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">发件人：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="email" placeholder="请输入发件人地址" autocomplete="off" class="layui-input" value="admin@abc3210.com">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">名称：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="name" placeholder="请输入发件人名称" autocomplete="off" class="layui-input" value="mfan管理员">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">用户名：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="username" placeholder="请输入用户名" autocomplete="off" class="layui-input" value="">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<label class="layui-form-label">密码：</label>-->
                            <!--<div class="layui-input-block">-->
                                <!--<input type="text" name="password" placeholder="请输入密码" autocomplete="off" class="layui-input" value="">-->
                            <!--</div>-->
                        <!--</div>-->
                        <!--<div class="layui-form-item">-->
                            <!--<div class="layui-input-block">-->
                                <!--<button class="layui-btn layui-btn-normal" lay-submit lay-filter="emailInfo">立即提交</button>-->
                            <!--</div>-->
                        <!--</div>-->
                    <!--</form>-->
                <!--</div>-->
                <!--评论设置-->
                <div class="layui-tab-item">
                    <form class="layui-form" style="width: 90%;padding-top: 20px;">
                        <div class="layui-form-item">
                            <label class="layui-form-label">评论审核：</label>
                            <div class="layui-input-block">
                                {eq name="$data.censor" value="on"}
                                <input type="checkbox" name="censor" lay-skin="primary" title="开启" checked="">
                                {else/}
                                <input type="checkbox" name="censor" lay-skin="primary" title="开启" >
                                {/eq}
                            </div>
                        </div>
                        <div class="layui-form-item">
                            <label class="layui-form-label">评论间隔：</label>
                            <div class="layui-input-inline">
                                <input type="text" name="review_interval" placeholder="请输入评论时间间隔" autocomplete="off" class="layui-input" value="{$data.review_interval}">
                            </div>
                            <div class="layui-form-mid layui-word-aux">秒</div>
                        </div>
                        <div class="layui-form-item">
                            <div class="layui-input-block">
                                <button class="layui-btn layui-btn-normal" lay-submit lay-filter="commentInfo">立即提交</button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
        </div>
{/block}
{block name="js"}
<script src="__ADMIN__/lib/echarts/echarts.js"></script>
{/block}
{block name="script"}
        <script>
            //Demo
            layui.use(['form', 'element','layer','jquery'], function() {
                var form = layui.form;
                var element = layui.element;
                let layer = layui.layer;
                let $ = layui.jquery;
                // form.render();
                //监听所有checkbox radio返回值,非on 时赋值off
                // form.on('radio',function(data){
                //     console.log(data.elem);
                //     console.log(data.value);
                // });
                form.on('checkbox(switchTest)',function(data){
                    if(data.value !== true){
                        // data.value = "off";
                        console.log($("input[name='switchTest']").val());
                    console.log(data.elem);
                    console.log(data.elem.checked);
                    console.log(data.value);
                    console.log(data.othis);}
                });

                //监听信息提交
                form.on('submit(siteInfo)', function(data) {
                    layer.msg(JSON.stringify(data.field),{time:10000});
                    $.ajax({
                        type: "POST",
                        url: "{:url('/admin/index/system')}",
                        dataType: "json",
                        data: data.field,
                        async: false,
                        // success: function (result) {
                        //     console.log(result);
                        //     if (result.status === "success") {
                        //         layer.msg(result.info, {icon: 1, time: 1500}, function () {
                        //             // location.href = '{:url("/admin/index/system")}';
                        //             form.render();
                        //         });
                        //     } else {
                        //         layer.msg(result.info, {icon: 2, time: 3700}, function () {
                        //             // location.href = '{:url("/admin/index/system")}';
                        //             form.render();
                        //         });
                        //     }
                        // },
                        error: function () {
                            alert('请联系网站管理员');
                            // console.log(data);
                        }
                    });
                    return false;
                });
                //监听seo提交
                form.on('submit(seoInfo)', function(data) {
                    layer.msg(JSON.stringify(data.field));
                    return false;
                });
                //监听seo提交
                form.on('submit(emailInfo)', function(data) {
                    layer.msg(JSON.stringify(data.field));
                    return false;
                });
                //监听评论提交
                form.on('submit(commentInfo)', function(data) {
                    layer.msg(JSON.stringify(data.field));
                    return false;
                });
            });
        </script>
{/block}